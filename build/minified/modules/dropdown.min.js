!function(O,e,Q){O.fn.dropdown=function(g){var p,b=O(this),y=O(e),w=b.selector||"",x="ontouchstart"in e.documentElement,T=(new Date).getTime(),k=[],C=g,D="string"==typeof C,E=[].slice.call(arguments,1);return b.each(function(){var a=O.isPlainObject(g)?O.extend(!0,{},O.fn.dropdown.settings,g):O.extend({},O.fn.dropdown.settings),l=a.className,s=a.metadata,e=a.namespace,r=a.selector,u=a.error,t="."+e,n="module-"+e,i=O(this),f=i.find(r.item),o=i.find(r.text),c=i.find(r.input),d=i.children(r.menu),m=this,v=i.data(n),h={initialize:function(){h.debug("Initializing dropdown",a),h.save.defaults(),h.set.selected(),x&&h.bind.touchEvents(),h.bind.mouseEvents(),h.bind.keyboardEvents(),h.instantiate()},instantiate:function(){h.verbose("Storing instance of dropdown",h),v=h,i.data(n,h)},destroy:function(){h.verbose("Destroying previous dropdown for",i),f.off(t),i.off(t).removeData(n)},bind:{keyboardEvents:function(){h.debug("Binding keyboard events"),i.on("keydown"+t,h.handleKeyboard),i.on("focus"+t,h.show)},touchEvents:function(){h.debug("Touch device detected binding touch events"),i.on("touchstart"+t,h.event.test.toggle),f.on("touchstart"+t,h.event.item.mouseenter).on("touchstart"+t,h.event.item.click)},mouseEvents:function(){h.verbose("Mouse detected binding mouse events"),"click"==a.on?i.on("click"+t,h.event.test.toggle):"hover"==a.on?i.on("mouseenter"+t,h.delay.show).on("mouseleave"+t,h.delay.hide):i.on(a.on+t,h.toggle),f.on("mouseenter"+t,h.event.item.mouseenter).on("mouseleave"+t,h.event.item.mouseleave).on("click"+t,h.event.item.click)},intent:function(){h.verbose("Binding hide intent event to document"),x&&y.on("touchstart"+t,h.event.test.touch).on("touchmove"+t,h.event.test.touch),y.on("click"+t,h.event.test.hide)}},unbind:{intent:function(){h.verbose("Removing hide intent event from document"),x&&y.off("touchstart"+t).off("touchmove"+t),y.off("click"+t)}},handleKeyboard:function(e){var t,n=f.filter("."+l.selected),i=e.which,o=13,a=27,s=38,r=40,u=l.selected,c=f.index(n),n=0<n.size(),d=f.size();if(i==a&&(h.verbose("Escape key pressed, closing dropdown"),h.hide()),h.is.visible()){if(i==o&&n)return h.verbose("Enter key pressed, choosing selected item"),O.proxy(h.event.item.click,f.filter("."+u))(e),e.preventDefault(),!1;i==s?(h.verbose("Up key pressed, changing active item"),t=c-1<0?c:c-1,f.removeClass(u).eq(t).addClass(u),e.preventDefault()):i==r&&(h.verbose("Down key pressed, changing active item"),t=d<=c+1?c:c+1,f.removeClass(u).eq(t).addClass(u),e.preventDefault())}else i==o&&h.show()},event:{test:{toggle:function(e){h.determine.intent(e,h.toggle)&&e.preventDefault()},touch:function(e){h.determine.intent(e,function(){"touchstart"==e.type?h.timer=setTimeout(h.hide,a.delay.touch):"touchmove"==e.type&&clearTimeout(h.timer)}),e.stopPropagation()},hide:function(e){h.determine.intent(e,h.hide)}},item:{mouseenter:function(e){var t=O(this).find(r.submenu),n=O(this).siblings(r.item).children(r.menu);(0<t.length||0<n.length)&&(clearTimeout(h.itemTimer),h.itemTimer=setTimeout(function(){0<n.length&&h.animate.hide(!1,n.filter(":visible")),0<t.length&&(h.verbose("Showing sub-menu",t),h.animate.show(!1,t))},2*a.delay.show),e.preventDefault(),e.stopPropagation())},mouseleave:function(e){var t=O(this).find(r.menu);0<t.size()&&(clearTimeout(h.itemTimer),h.itemTimer=setTimeout(function(){h.verbose("Hiding sub-menu",t),h.animate.hide(!1,t)},a.delay.hide))},click:function(e){function t(){h.determine.selectAction(i,o),O.proxy(a.onChange,m)(o,i)}var n=O(this),i=n.data(s.text)!==Q?n.data(s.text):n.text(),o=n.data(s.value)!==Q?n.data(s.value):"string"==typeof i?i.toLowerCase():i;0===n.find(r.menu).size()&&("touchstart"==e.type?n.one("click",t):t())}},resetStyle:function(){O(this).removeAttr("style")}},determine:{selectAction:function(e,t){h.verbose("Determining action",a.action),O.isFunction(h.action[a.action])?(h.verbose("Triggering preset action",a.action,e,t),h.action[a.action](e,t)):O.isFunction(a.action)?(h.verbose("Triggering user action",a.action,e,t),a.action(e,t)):h.error(u.action,a.action)},intent:function(e,t){return h.debug("Determining whether event occurred in dropdown",e.target),t=t||function(){},0===O(e.target).closest(d).size()?(h.verbose("Triggering event",t),t(),!0):(h.verbose("Event occurred in dropdown, canceling callback"),!1)}},action:{nothing:function(){},hide:function(){h.hide()},activate:function(e,t){h.set.selected(t=t!==Q?t:e),h.set.value(t),h.hide()},auto:function(e,t){h.set.selected(t=t!==Q?t:e),h.set.value(t),h.hide()},changeText:function(e,t){h.set.selected(t=t!==Q?t:e),h.hide()},updateForm:function(e,t){h.set.selected(t=t!==Q?t:e),h.set.value(t),h.hide()}},get:{text:function(){return o.text()},value:function(){return 0<c.size()?c.val():i.data(s.value)},item:function(n,i){var o=!1;return n=n!==Q?n:h.get.value()!==Q?h.get.value():h.get.text(),i=i===Q&&""===n?(h.debug("Ambiguous dropdown value using strict type check",n),!0):i||!1,n!==Q?f.each(function(){var e=O(this),t=e.data(s.text)!==Q?e.data(s.text):e.text(),e=e.data(s.value)!==Q?e.data(s.value):"string"==typeof t?t.toLowerCase():t;i?e!==n&&(o||t!==n)||(o=O(this)):e!=n&&(o||t!=n)||(o=O(this))}):n=h.get.text(),o||!1}},restore:{defaults:function(){h.restore.defaultText(),h.restore.defaultValue()},defaultText:function(){var e=i.data(s.defaultText);h.debug("Restoring default text",e),h.set.text(e)},defaultValue:function(){var e=i.data(s.defaultValue);e!==Q&&(h.debug("Restoring default value",e),h.set.selected(e),h.set.value(e))}},save:{defaults:function(){h.save.defaultText(),h.save.defaultValue()},defaultValue:function(){i.data(s.defaultValue,h.get.value())},defaultText:function(){i.data(s.defaultText,o.text())}},set:{text:function(e){h.debug("Changing text",e,o),o.removeClass(l.placeholder),o.text(e)},value:function(e){h.debug("Adding selected value to hidden input",e,c),0<c.size()?c.val(e).trigger("change"):i.data(s.value,e)},active:function(){i.addClass(l.active)},visible:function(){i.addClass(l.visible)},selected:function(e){var t,e=h.get.item(e);e&&(h.debug("Setting selected menu item to",e),t=e.data(s.text)!==Q?e.data(s.text):e.text(),f.removeClass(l.active),e.addClass(l.active),h.set.text(t))}},remove:{active:function(){i.removeClass(l.active)},visible:function(){i.removeClass(l.visible)}},is:{selection:function(){return i.hasClass(l.selection)},animated:function(e){return e?e.transition&&e.transition("is animating"):d.transition&&d.transition("is animating")},visible:function(e){return(e||d).is(":visible")},hidden:function(e){return(e||d).is(":not(:visible)")}},can:{click:function(){return x||"click"==a.on},show:function(){return!i.hasClass(l.disabled)}},animate:{show:function(e,t){t=t||d;e=e||function(){},h.is.hidden(t)&&(h.verbose("Doing menu show animation",t),"none"==a.transition?e():O.fn.transition!==Q&&i.transition("is supported")?t.transition({animation:a.transition+" in",duration:a.duration,complete:e,queue:!1}):"slide down"==a.transition?t.hide().clearQueue().children().clearQueue().css("opacity",0).delay(50).animate({opacity:1},a.duration,"easeOutQuad",h.event.resetStyle).end().slideDown(100,"easeOutQuad",function(){O.proxy(h.event.resetStyle,this)(),e()}):"fade"==a.transition?t.hide().clearQueue().fadeIn(a.duration,function(){O.proxy(h.event.resetStyle,this)(),e()}):h.error(u.transition,a.transition))},hide:function(e,t){t=t||d;e=e||function(){},h.is.visible(t)&&(h.verbose("Doing menu hide animation",t),"none"==a.transition?e():O.fn.transition!==Q&&i.transition("is supported")?t.transition({animation:a.transition+" out",duration:a.duration,complete:e,queue:!1}):"slide down"==a.transition?t.show().clearQueue().children().clearQueue().css("opacity",1).animate({opacity:0},100,"easeOutQuad",h.event.resetStyle).end().delay(50).slideUp(100,"easeOutQuad",function(){O.proxy(h.event.resetStyle,this)(),e()}):"fade"==a.transition?t.show().clearQueue().fadeOut(150,function(){O.proxy(h.event.resetStyle,this)(),e()}):h.error(u.transition))}},show:function(){h.debug("Checking if dropdown can show"),h.is.hidden()&&(h.hideOthers(),h.set.active(),h.animate.show(function(){h.can.click()&&setTimeout(h.bind.intent,0),h.set.visible()}),O.proxy(a.onShow,m)())},hide:function(){!h.is.animated()&&h.is.visible()&&(h.debug("Hiding dropdown"),h.can.click()&&h.unbind.intent(),h.remove.active(),h.animate.hide(h.remove.visible),O.proxy(a.onHide,m)())},delay:{show:function(){h.verbose("Delaying show event to ensure user intent"),clearTimeout(h.timer),h.timer=setTimeout(h.show,a.delay.show)},hide:function(){h.verbose("Delaying hide event to ensure user intent"),clearTimeout(h.timer),h.timer=setTimeout(h.hide,a.delay.hide)}},hideOthers:function(){h.verbose("Finding other dropdowns to hide"),b.not(i).has(r.menu+":visible").dropdown("hide")},toggle:function(){h.verbose("Toggling menu visibility"),h.is.hidden()?h.show():h.hide()},setting:function(e,t){if(O.isPlainObject(e))O.extend(!0,a,e);else{if(t===Q)return a[e];a[e]=t}},internal:function(e,t){if(O.isPlainObject(e))O.extend(!0,h,e);else{if(t===Q)return h[e];h[e]=t}},debug:function(){a.debug&&(a.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,a.name+":"),h.debug.apply(console,arguments)))},verbose:function(){a.verbose&&a.debug&&(a.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,a.name+":"),h.verbose.apply(console,arguments)))},error:function(){h.error=Function.prototype.bind.call(console.error,console,a.name+":"),h.error.apply(console,arguments)},performance:{log:function(e){var t,n;a.performance&&(n=(t=(new Date).getTime())-(T||t),T=t,k.push({Element:m,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,100)},display:function(){var e=a.name+":",n=0;T=!1,clearTimeout(h.performance.timer),O.each(k,function(e,t){n+=t["Execution Time"]}),e+=" "+n+"ms",w&&(e+=" '"+w+"'"),(console.group!==Q||console.table!==Q)&&0<k.length&&(console.groupCollapsed(e),console.table?console.table(k):O.each(k,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),k=[]}},invoke:function(i,e,t){var o,a,n,s=v;return e=e||E,t=m||t,"string"==typeof i&&s!==Q&&(i=i.split(/[\. ]/),o=i.length-1,O.each(i,function(e,t){var n=e!=o?t+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(O.isPlainObject(s[n])&&e!=o)s=s[n];else{if(s[n]!==Q)return a=s[n],!1;{if(!O.isPlainObject(s[t])||e==o)return s[t]!==Q?a=s[t]:h.error(u.method,i),!1;s=s[t]}}})),O.isFunction(a)?n=a.apply(t,e):a!==Q&&(n=a),O.isArray(p)?p.push(n):p!==Q?p=[p,n]:n!==Q&&(p=n),a}};D?(v===Q&&h.initialize(),h.invoke(C)):(v!==Q&&h.destroy(),h.initialize())}),p!==Q?p:this},O.fn.dropdown.settings={name:"Dropdown",namespace:"dropdown",debug:!1,verbose:!0,performance:!0,on:"click",action:"activate",delay:{show:200,hide:300,touch:50},transition:"slide down",duration:250,onChange:function(e,t){},onShow:function(){},onHide:function(){},error:{action:"You called a dropdown action that was not defined",method:"The method you called is not defined.",transition:"The requested transition was not found"},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",text:"text",value:"value"},selector:{menu:".menu",submenu:"> .menu",item:".menu > .item, .menu > :not(.menu) > .item, .menu > :not(.menu) > :not(.menu) > .item",text:"> .text",input:'> input[type="hidden"]'},className:{active:"active",placeholder:"default",disabled:"disabled",visible:"visible",selected:"selected",selection:"selection"}},O.extend(O.easing,{easeOutQuad:function(e,t,n,i,o){return-i*(t/=o)*(t-2)+n}})}(jQuery,(window,document));