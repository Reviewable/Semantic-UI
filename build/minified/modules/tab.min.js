!function(E,w,S){E.fn.tab=function(e){var b,f,g,s,h=E.extend(!0,{},E.fn.tab.settings,e),a=E(this),n=E(h.context).find(h.selector.tabs),t=a.selector||"",i={},p=!0,o=0,c=this,r=(new Date).getTime(),l=[],u=h.className,d=h.metadata,m=h.error,v="."+h.namespace,y="module-"+h.namespace,T=a.data(y),x=e,A=T!==S&&"string"==typeof x,P=[].slice.call(arguments,1),C={initialize:function(){if(C.debug("Initializing Tabs",a),h.auto&&(C.verbose("Setting up automatic tab retrieval from server"),h.apiSettings={url:h.path+"/{$tab}"}),h.history){if(C.debug("Initializing page state"),E.address===S)return C.error(m.state),!1;if("hash"==h.historyType&&C.debug("Using hash state change to manage state"),"html5"==h.historyType){if(C.debug("Using HTML5 to manage state"),!1===h.path)return C.error(m.path),!1;E.address.history(!0).state(h.path)}E.address.unbind("change").bind("change",C.event.history.change)}E.isWindow(c)||(C.debug("Attaching tab activation events to element",a),a.on("click"+v,C.event.click)),C.instantiate()},instantiate:function(){C.verbose("Storing instance of module",C),a.data(y,C)},destroy:function(){C.debug("Destroying tabs",a),a.removeData(y).off(v)},event:{click:function(e){var t=E(this).data(d.tab);t!==S?(h.history?(C.verbose("Updating page state",e),E.address.value(t)):(C.verbose("Changing tab without state management",e),C.changeTab(t)),e.preventDefault()):C.debug("No tab specified")},history:{change:function(e){var t=e.pathNames.join("/")||C.get.initialPath(),a=h.templates.determineTitle(t)||!1;C.debug("History change event",t,e),g=e,t!==S&&C.changeTab(t),a&&E.address.title(a)}}},refresh:function(){b&&(C.debug("Refreshing tab",b),C.changeTab(b))},cache:{read:function(e){return e!==S&&i[e]},add:function(e,t){e=e||b,C.debug("Adding cached content for",e),i[e]=t},remove:function(e){e=e||b,C.debug("Removing cached content for",e),delete i[e]}},set:{state:function(e){E.address.value(e)}},changeTab:function(c){var l=w.history&&w.history.pushState&&h.ignoreFirstLoad&&p,u=h.auto||E.isPlainObject(h.apiSettings),d=u&&!l?C.utilities.pathToArray(c):C.get.defaultPathArray(c);c=C.utilities.arrayToPath(d),C.deactivate.all(),E.each(d,function(e,t){var a,n=d.slice(0,e+1),i=C.utilities.arrayToPath(n),o=C.is.tab(i),r=e+1==d.length,s=C.get.tabElement(i);return C.verbose("Looking for tab",t),o?(C.verbose("Tab was found",t),b=i,f=C.utilities.filterArray(d,n),r?a=!0:(o=d.slice(0,e+2),n=C.utilities.arrayToPath(o),(a=!C.is.tab(n))&&C.verbose("Tab parameters found",o)),a&&u?(l?(C.debug("Ignoring remote content on first tab load",i),p=!1,C.cache.add(c,s.html()),C.activate.all(i),E.proxy(h.onTabInit,s)(i,f,g),E.proxy(h.onTabLoad,s)(i,f,g)):(C.activate.navigation(i),C.content.fetch(i,c)),!1):(C.debug("Opened local tab",i),C.activate.all(i),C.cache.read(i)||(C.cache.add(i,!0),C.debug("First time tab loaded calling tab init"),E.proxy(h.onTabInit,s)(i,f,g)),void E.proxy(h.onTabLoad,s)(i,f,g))):(C.error(m.missingTab,t),!1)})},content:{fetch:function(t,a){var e,n=C.get.tabElement(t),i={dataType:"html",stateContext:n,success:function(e){C.cache.add(a,e),C.content.update(t,e),t==b?(C.debug("Content loaded",t),C.activate.tab(t)):C.debug("Content loaded in background",t),E.proxy(h.onTabInit,n)(t,f,g),E.proxy(h.onTabLoad,n)(t,f,g)},urlData:{tab:a}},o=n.data(d.promise)||!1,o=o&&"pending"===o.state();a=a||t,e=C.cache.read(a),h.cache&&e?(C.debug("Showing existing content",a),C.content.update(t,e),C.activate.tab(t),E.proxy(h.onTabLoad,n)(t,f,g)):o?(C.debug("Content is already loading",a),n.addClass(u.loading)):E.api!==S?(console.log(h.apiSettings),e=E.extend(!0,{headers:{"X-Remote":!0}},h.apiSettings,i),C.debug("Retrieving remote content",a,e),E.api(e)):C.error(m.api)},update:function(e,t){C.debug("Updating html for",e),C.get.tabElement(e).html(t)}},activate:{all:function(e){C.activate.tab(e),C.activate.navigation(e)},tab:function(e){e=C.get.tabElement(e);C.verbose("Showing tab content for",e),e.addClass(u.active)},navigation:function(e){var t=C.get.navElement(e);C.verbose("Activating tab navigation for",t,e),t.addClass(u.active)}},deactivate:{all:function(){C.deactivate.navigation(),C.deactivate.tabs()},navigation:function(){a.removeClass(u.active)},tabs:function(){n.removeClass(u.active+" "+u.loading)}},is:{tab:function(e){return e!==S&&0<C.get.tabElement(e).size()}},get:{initialPath:function(){return a.eq(0).data(d.tab)||n.eq(0).data(d.tab)},path:function(){return E.address.value()},defaultPathArray:function(e){return C.utilities.pathToArray(C.get.defaultPath(e))},defaultPath:function(e){var t=a.filter("[data-"+d.tab+'^="'+e+'/"]').eq(0).data(d.tab)||!1;if(t){if(C.debug("Found default tab",t),o<h.maxDepth)return o++,C.get.defaultPath(t);C.error(m.recursion)}else C.debug("No default tabs found for",e,n);return o=0,e},navElement:function(e){return e=e||b,a.filter("[data-"+d.tab+'="'+e+'"]')},tabElement:function(e){var t;return e=e||b,t=C.utilities.pathToArray(e),t=C.utilities.last(t),t=n.filter("[data-"+d.tab+'="'+t+'"]'),e=n.filter("[data-"+d.tab+'="'+e+'"]'),0<t.size()?t:e},tab:function(){return b}},utilities:{filterArray:function(e,t){return E.grep(e,function(e){return-1==E.inArray(e,t)})},last:function(e){return!!E.isArray(e)&&e[e.length-1]},pathToArray:function(e){return"string"==typeof(e=e===S?b:e)?e.split("/"):[e]},arrayToPath:function(e){return!!E.isArray(e)&&e.join("/")}},setting:function(e,t){if(E.isPlainObject(e))E.extend(!0,h,e);else{if(t===S)return h[e];h[e]=t}},internal:function(e,t){if(E.isPlainObject(e))E.extend(!0,C,e);else{if(t===S)return C[e];C[e]=t}},debug:function(){h.debug&&(h.performance?C.performance.log(arguments):(C.debug=Function.prototype.bind.call(console.info,console,h.name+":"),C.debug.apply(console,arguments)))},verbose:function(){h.verbose&&h.debug&&(h.performance?C.performance.log(arguments):(C.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),C.verbose.apply(console,arguments)))},error:function(){C.error=Function.prototype.bind.call(console.error,console,h.name+":"),C.error.apply(console,arguments)},performance:{log:function(e){var t,a;h.performance&&(a=(t=(new Date).getTime())-(r||t),r=t,l.push({Element:c,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":a})),clearTimeout(C.performance.timer),C.performance.timer=setTimeout(C.performance.display,100)},display:function(){var e=h.name+":",a=0;r=!1,clearTimeout(C.performance.timer),E.each(l,function(e,t){a+=t["Execution Time"]}),e+=" "+a+"ms",t&&(e+=" '"+t+"'"),(console.group!==S||console.table!==S)&&0<l.length&&(console.groupCollapsed(e),console.table?console.table(l):E.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(n,e,t){var i,o,a,r=T;return e=e||P,t=c||t,"string"==typeof n&&r!==S&&(n=n.split(/[\. ]/),i=n.length-1,E.each(n,function(e,t){var a=e!=i?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(E.isPlainObject(r[a])&&e!=i)r=r[a];else{if(r[a]!==S)return o=r[a],!1;{if(!E.isPlainObject(r[t])||e==i)return r[t]!==S&&(o=r[t]),!1;r=r[t]}}})),E.isFunction(o)?a=o.apply(t,e):o!==S&&(a=o),E.isArray(s)?s.push(a):s!==S?s=[s,a]:a!==S&&(s=a),o}};return A?(T===S&&C.initialize(),C.invoke(x)):(T!==S&&C.destroy(),C.initialize()),s!==S?s:this},E.tab=function(e){E(w).tab(e)},E.fn.tab.settings={name:"Tab",debug:!1,verbose:!0,performance:!0,namespace:"tab",onTabInit:function(e,t,a){},onTabLoad:function(e,t,a){},templates:{determineTitle:function(e){}},auto:!1,history:!0,historyType:"hash",path:!1,context:"body",maxDepth:25,ignoreFirstLoad:!1,alwaysRefresh:!1,cache:!0,apiSettings:!1,error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Tab cannot be found",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",state:"The state library has not been initialized"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab"}}}(jQuery,window,void document);