!function(C,T,F){C.fn.form=function(e,n){var c,t=C(this),f=C.extend(!0,{},C.fn.form.settings,n),p=C.extend({},C.fn.form.settings.defaults,e),i=f.namespace,m=f.metadata,v=f.selector,g=f.className,h=(f.error,"."+i),b="module-"+i,y=t.selector||"",z=(new Date).getTime(),k=[],w=e,x="string"==typeof w,E=[].slice.call(arguments,1);return t.each(function(){var o=C(this),n=C(this).find(v.field),a=C(this).find(v.group),i=C(this).find(v.message),r=(C(this).find(v.prompt),C(this).find(v.submit)),s=[],l=this,u=o.data(b),d={initialize:function(){d.verbose("Initializing form validation",o,p,f),d.bindEvents(),d.instantiate()},instantiate:function(){d.verbose("Storing instance of module",d),u=d,o.data(b,d)},destroy:function(){d.verbose("Destroying previous module",u),d.removeEvents(),o.removeData(b)},refresh:function(){d.verbose("Refreshing selector cache"),n=o.find(v.field)},submit:function(){d.verbose("Submitting form",o),o.submit()},bindEvents:function(){f.keyboardShortcuts&&n.on("keydown"+h,d.event.field.keydown),o.on("submit"+h,d.validate.form),n.on("blur"+h,d.event.field.blur),r.on("click"+h,d.submit),n.each(function(){var e=C(this).prop("type"),e=d.get.changeEvent(e);C(this).on(e+h,d.event.field.change)})},removeEvents:function(){o.off(h),n.off(h),r.off(h),n.off(h)},event:{field:{keydown:function(e){var n=C(this),i=e.which,t=13;if(i==27&&(d.verbose("Escape key pressed blurring field"),n.blur()),!e.ctrlKey&&i==t&&n.is(v.input))return d.debug("Enter key pressed, submitting form"),r.addClass(g.down),n.one("keyup"+h,d.event.field.keyup),e.preventDefault(),!1},keyup:function(){d.verbose("Doing keyboard shortcut form submit"),r.removeClass(g.down),d.submit()},blur:function(){var e=C(this);e.closest(a).hasClass(g.error)?(d.debug("Revalidating field",e,d.get.validation(e)),d.validate.field(d.get.validation(e))):"blur"!=f.on&&"change"!=f.on||d.validate.field(d.get.validation(e))},change:function(){var e=C(this),n=e.closest(a);("change"==f.on||n.hasClass(g.error)&&f.revalidate)&&(clearTimeout(d.timer),d.timer=setTimeout(function(){d.debug("Revalidating field",e,d.get.validation(e)),d.validate.field(d.get.validation(e))},f.delay))}}},get:{changeEvent:function(e){return"checkbox"==e||"radio"==e||"hidden"==e?"change":T.createElement("input").oninput!==F?"input":T.createElement("input").onpropertychange!==F?"propertychange":"keyup"},field:function(e){return d.verbose("Finding field with identifier",e),0<n.filter("#"+e).size()?n.filter("#"+e):0<n.filter('[name="'+e+'"]').size()?n.filter('[name="'+e+'"]'):0<n.filter("[data-"+m.validate+'="'+e+'"]').size()?n.filter("[data-"+m.validate+'="'+e+'"]'):C("<input/>")},validation:function(i){var t;return C.each(p,function(e,n){d.get.field(n.identifier).get(0)==i.get(0)&&(t=n)}),t||!1}},has:{field:function(e){return d.verbose("Checking for existence of a field with identifier",e),0<n.filter("#"+e).size()||(0<n.filter('[name="'+e+'"]').size()||0<n.filter("[data-"+m.validate+'="'+e+'"]').size())}},add:{prompt:function(e,n){var i=d.get.field(e).closest(a),t=i.find(v.prompt),r=0!==t.size();n="string"==typeof n?[n]:n,d.verbose("Adding field error state",e),i.addClass(g.error),f.inline&&(r||(t=f.templates.prompt(n)).appendTo(i),t.html(n[0]),r?d.verbose("Inline errors are disabled, no inline error added",e):f.transition&&C.fn.transition!==F&&o.transition("is supported")?(d.verbose("Displaying error with css transition",f.transition),t.transition(f.transition+" in",f.duration)):(d.verbose("Displaying error with fallback javascript animation"),t.fadeIn(f.duration)))},errors:function(e){d.debug("Adding form error messages",e),i.html(f.templates.error(e))}},remove:{prompt:function(e){var n=d.get.field(e.identifier).closest(a),i=n.find(v.prompt);n.removeClass(g.error),f.inline&&i.is(":visible")&&(d.verbose("Removing prompt for field",e),f.transition&&C.fn.transition!==F&&o.transition("is supported")?i.transition(f.transition+" out",f.duration,function(){i.remove()}):i.fadeOut(f.duration,function(){i.remove()}))}},validate:{form:function(e){var i=!0;return s=[],C.each(p,function(e,n){d.validate.field(n)||(i=!1)}),i?(d.debug("Form has no validation errors, submitting"),o.removeClass(g.error).addClass(g.success),C.proxy(f.onSuccess,this)(e)):(d.debug("Form has errors"),o.addClass(g.error),f.inline||d.add.errors(s),C.proxy(f.onFailure,this)(s))},field:function(i){var e=d.get.field(i.identifier),t=!0,r=[];return i.rules!==F&&C.each(i.rules,function(e,n){d.has.field(i.identifier)&&!d.validate.rule(i,n)&&(d.debug("Field is invalid",i.identifier,n.type),r.push(n.prompt),t=!1)}),t?(d.remove.prompt(i,r),C.proxy(f.onValid,e)(),!0):(s=s.concat(r),d.add.prompt(i.identifier,r),C.proxy(f.onInvalid,e)(r),!1)},rule:function(e,n){var i,e=d.get.field(e.identifier),n=n.type,t=C.trim(e.val()+""),r=/\[(.*)\]/i.exec(n);return r!==F&&null!==r?(i=""+r[1],r=n.replace(r[0],""),C.proxy(f.rules[r],o)(t,i)):C.proxy(f.rules[n],e)(t)}},setting:function(e,n){if(C.isPlainObject(e))C.extend(!0,f,e);else{if(n===F)return f[e];f[e]=n}},internal:function(e,n){if(C.isPlainObject(e))C.extend(!0,d,e);else{if(n===F)return d[e];d[e]=n}},debug:function(){f.debug&&(f.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,f.name+":"),d.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),d.verbose.apply(console,arguments)))},error:function(){d.error=Function.prototype.bind.call(console.error,console,f.name+":"),d.error.apply(console,arguments)},performance:{log:function(e){var n,i;f.performance&&(i=(n=(new Date).getTime())-(z||n),z=n,k.push({Element:l,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,100)},display:function(){var e=f.name+":",i=0;z=!1,clearTimeout(d.performance.timer),C.each(k,function(e,n){i+=n["Execution Time"]}),e+=" "+i+"ms",y&&(e+=" '"+y+"'"),1<t.size()&&(e+=" ("+t.size()+")"),(console.group!==F||console.table!==F)&&0<k.length&&(console.groupCollapsed(e),console.table?console.table(k):C.each(k,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),k=[]}},invoke:function(t,e,n){var r,o,i,a=u;return e=e||E,n=l||n,"string"==typeof t&&a!==F&&(t=t.split(/[\. ]/),r=t.length-1,C.each(t,function(e,n){var i=e!=r?n+t[e+1].charAt(0).toUpperCase()+t[e+1].slice(1):t;if(C.isPlainObject(a[i])&&e!=r)a=a[i];else{if(a[i]!==F)return o=a[i],!1;{if(!C.isPlainObject(a[n])||e==r)return a[n]!==F&&(o=a[n]),!1;a=a[n]}}})),C.isFunction(o)?i=o.apply(n,e):o!==F&&(i=o),C.isArray(c)?c.push(i):c!==F?c=[c,i]:i!==F&&(c=i),o}};x?(u===F&&d.initialize(),d.invoke(w)):(u!==F&&d.destroy(),d.initialize())}),c!==F?c:this},C.fn.form.settings={name:"Form",namespace:"form",debug:!0,verbose:!0,performance:!0,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:150,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{validate:"validate"},selector:{message:".error.message",field:"input, textarea, select",group:".field",input:"input",prompt:".prompt",submit:'.submit:not([type="submit"])'},className:{error:"error",success:"success",down:"down",label:"ui label prompt"},error:{method:"The method you called is not defined."},templates:{error:function(e){var i='<ul class="list">';return C.each(e,function(e,n){i+="<li>"+n+"</li>"}),C(i+="</ul>")},prompt:function(e){return C("<div/>").addClass("ui red pointing prompt label").html(e[0])}},rules:{checked:function(){return 0<C(this).filter(":checked").size()},empty:function(e){return!(e===F||""===e)},email:function(e){return new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","i").test(e)},length:function(e,n){return e!==F&&e.length>=n},not:function(e,n){return e!=n},contains:function(e,n){return n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),-1!==e.search(n)},is:function(e,n){return e==n},maxLength:function(e,n){return e!==F&&e.length<=n},match:function(e,n){var i,t=C(this);return 0<t.find("#"+n).size()?i=t.find("#"+n).val():0<t.find("[name="+n+"]").size()?i=t.find("[name="+n+"]").val():0<t.find('[data-validate="'+n+'"]').size()&&(i=t.find('[data-validate="'+n+'"]').val()),i!==F&&e.toString()==i.toString()},url:function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)}}}}(jQuery,(window,document));