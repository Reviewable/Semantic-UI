!function(k,T,E){k.fn.shape=function(v){var b,x=k(this),y=k("body"),W=(new Date).getTime(),C=[],S=v,z="string"==typeof S,w=[].slice.call(arguments,1);return x.each(function(){var i,n,t=x.selector||"",a=k.extend(!0,{},k.fn.shape.settings,v),e=a.namespace,o=a.selector,r=a.error,s=a.className,d="."+e,u="module-"+e,l=k(this),c=l.find(o.sides),g=l.find(o.side),f=!1,p=this,m=l.data(u),h={initialize:function(){h.verbose("Initializing module for",p),h.set.defaultSide(),h.instantiate()},instantiate:function(){h.verbose("Storing instance of module",h),m=h,l.data(u,m)},destroy:function(){h.verbose("Destroying previous module for",p),l.removeData(u).off(d)},refresh:function(){h.verbose("Refreshing selector cache for",p),l=k(p),c=k(this).find(o.shape),g=k(this).find(o.side)},repaint:function(){h.verbose("Forcing repaint event");(c.get(0)||T.createElement("div")).offsetWidth},animate:function(e,t){h.verbose("Animating box with properties",e),t=t||function(e){h.verbose("Executing animation callback"),e!==E&&e.stopPropagation(),h.reset(),h.set.active()},k.proxy(a.beforeChange,n[0])(),h.get.transitionEvent()?(h.verbose("Starting CSS animation"),l.addClass(s.animating),h.repaint(),l.addClass(s.animating),i.addClass(s.hidden),c.css(e).one(h.get.transitionEvent(),t),h.set.duration(a.duration)):t()},queue:function(e){h.debug("Queueing animation of",e),c.one(h.get.transitionEvent(),function(){h.debug("Executing queued animation"),setTimeout(function(){l.shape(e)},0)})},reset:function(){h.verbose("Animating states reset"),l.removeClass(s.animating).attr("style","").removeAttr("style"),c.attr("style","").removeAttr("style"),g.attr("style","").removeAttr("style").removeClass(s.hidden),n.removeClass(s.animating).attr("style","").removeAttr("style")},is:{animating:function(){return l.hasClass(s.animating)}},set:{defaultSide:function(){i=l.find("."+a.className.active),n=0<i.next(o.side).size()?i.next(o.side):l.find(o.side).first(),f=!1,h.verbose("Active side set to",i),h.verbose("Next side set to",n)},duration:function(e){e=e||a.duration,h.verbose("Setting animation duration",e="number"==typeof e?e+"ms":e),c.add(g).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},stageSize:function(){var e=l.clone().addClass(s.loading),t=e.find("."+a.className.active),i=f?e.find(f):0<t.next(o.side).size()?t.next(o.side):e.find(o.side).first();t.removeClass(s.active),i.addClass(s.active),e.prependTo(y),t={width:i.outerWidth(),height:i.outerHeight()},e.remove(),l.css(t),h.verbose("Resizing stage to fit new content",t)},nextSide:function(e){f=e,0===(n=l.find(e)).size()&&h.error(r.side),h.verbose("Next side manually set to",n)},active:function(){h.verbose("Setting new side to active",n),g.removeClass(s.active),n.addClass(s.active),k.proxy(a.onChange,n[0])(),h.set.defaultSide()}},flip:{up:function(){h.debug("Flipping up",n),h.is.animating()?h.queue("flip up"):(h.set.stageSize(),h.stage.above(),h.animate(h.get.transform.up()))},down:function(){h.debug("Flipping down",n),h.is.animating()?h.queue("flip down"):(h.set.stageSize(),h.stage.below(),h.animate(h.get.transform.down()))},left:function(){h.debug("Flipping left",n),h.is.animating()?h.queue("flip left"):(h.set.stageSize(),h.stage.left(),h.animate(h.get.transform.left()))},right:function(){h.debug("Flipping right",n),h.is.animating()?h.queue("flip right"):(h.set.stageSize(),h.stage.right(),h.animate(h.get.transform.right()))},over:function(){h.debug("Flipping over",n),h.is.animating()?h.queue("flip over"):(h.set.stageSize(),h.stage.behind(),h.animate(h.get.transform.over()))},back:function(){h.debug("Flipping back",n),h.is.animating()?h.queue("flip back"):(h.set.stageSize(),h.stage.behind(),h.animate(h.get.transform.back()))}},get:{transform:{up:function(){return{transform:"translateY("+-(i.outerHeight()-n.outerHeight())/2+"px) translateZ("+-i.outerHeight()/2+"px) rotateX(-90deg)"}},down:function(){return{transform:"translateY("+-(i.outerHeight()-n.outerHeight())/2+"px) translateZ("+-i.outerHeight()/2+"px) rotateX(90deg)"}},left:function(){return{transform:"translateX("+-(i.outerWidth()-n.outerWidth())/2+"px) translateZ("+-i.outerWidth()/2+"px) rotateY(90deg)"}},right:function(){return{transform:"translateX("+-(i.outerWidth()-n.outerWidth())/2+"px) translateZ("+-i.outerWidth()/2+"px) rotateY(-90deg)"}},over:function(){return{transform:"translateX("+-(i.outerWidth()-n.outerWidth())/2+"px) rotateY(180deg)"}},back:function(){return{transform:"translateX("+-(i.outerWidth()-n.outerWidth())/2+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=T.createElement("element"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(t.style[e]!==E)return i[e]},nextSide:function(){return 0<i.next(o.side).size()?i.next(o.side):l.find(o.side).first()}},stage:{above:function(){var e={origin:(i.outerHeight()-n.outerHeight())/2,depth:{active:n.outerHeight()/2,next:i.outerHeight()/2}};h.verbose("Setting the initial animation position as above",n,e),i.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),n.addClass(s.animating).css({display:"block",top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(i.outerHeight()-n.outerHeight())/2,depth:{active:n.outerHeight()/2,next:i.outerHeight()/2}};h.verbose("Setting the initial animation position as below",n,e),i.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),n.addClass(s.animating).css({display:"block",top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e={origin:(i.outerWidth()-n.outerWidth())/2,depth:{active:n.outerWidth()/2,next:i.outerWidth()/2}};h.verbose("Setting the initial animation position as left",n,e),i.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),n.addClass(s.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(-90deg) translateZ("+e.depth.next+"px)"})},right:function(){var e={origin:(i.outerWidth()-n.outerWidth())/2,depth:{active:n.outerWidth()/2,next:i.outerWidth()/2}};h.verbose("Setting the initial animation position as left",n,e),i.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),n.addClass(s.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(90deg) translateZ("+e.depth.next+"px)"})},behind:function(){var e={origin:(i.outerWidth()-n.outerWidth())/2,depth:{active:n.outerWidth()/2,next:i.outerWidth()/2}};h.verbose("Setting the initial animation position as behind",n,e),i.css({transform:"rotateY(0deg)"}),n.addClass(s.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(e,t){if(k.isPlainObject(e))k.extend(!0,a,e);else{if(t===E)return a[e];a[e]=t}},internal:function(e,t){if(k.isPlainObject(e))k.extend(!0,h,e);else{if(t===E)return h[e];h[e]=t}},debug:function(){a.debug&&(a.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,a.name+":"),h.debug.apply(console,arguments)))},verbose:function(){a.verbose&&a.debug&&(a.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,a.name+":"),h.verbose.apply(console,arguments)))},error:function(){h.error=Function.prototype.bind.call(console.error,console,a.name+":"),h.error.apply(console,arguments)},performance:{log:function(e){var t,i;a.performance&&(i=(t=(new Date).getTime())-(W||t),W=t,C.push({Element:p,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,100)},display:function(){var e=a.name+":",i=0;W=!1,clearTimeout(h.performance.timer),k.each(C,function(e,t){i+=t["Execution Time"]}),e+=" "+i+"ms",t&&(e+=" '"+t+"'"),1<x.size()&&(e+=" ("+x.size()+")"),(console.group!==E||console.table!==E)&&0<C.length&&(console.groupCollapsed(e),console.table?console.table(C):k.each(C,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),C=[]}},invoke:function(n,e,t){var a,o,i,r=m;return e=e||w,t=p||t,"string"==typeof n&&r!==E&&(n=n.split(/[\. ]/),a=n.length-1,k.each(n,function(e,t){var i=e!=a?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(k.isPlainObject(r[i])&&e!=a)r=r[i];else{if(r[i]!==E)return o=r[i],!1;{if(!k.isPlainObject(r[t])||e==a)return r[t]!==E&&(o=r[t]),!1;r=r[t]}}})),k.isFunction(o)?i=o.apply(t,e):o!==E&&(i=o),k.isArray(b)?b.push(i):b!==E?b=[b,i]:i!==E&&(b=i),o}};z?(m===E&&h.initialize(),h.invoke(S)):(m!==E&&h.destroy(),h.initialize())}),b!==E?b:this},k.fn.shape.settings={name:"Shape",debug:!1,verbose:!0,performance:!0,namespace:"shape",beforeChange:function(){},onChange:function(){},duration:700,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}}(jQuery,(window,document));