!function(R,x){R.fn.rating=function(g){var m,v=R(this),f=v.selector||"",p=(new Date).getTime(),b=[],h=g,y="string"==typeof h,C=[].slice.call(arguments,1);return v.each(function(){var i=R.isPlainObject(g)?R.extend(!0,{},R.fn.rating.settings,g):R.extend({},R.fn.rating.settings),e=i.namespace,t=i.className,n=i.metadata,a=i.selector,o=(i.error,"."+e),r="module-"+e,s=this,l=R(this).data(r),c=R(this),u=c.find(a.icon),d={initialize:function(){d.verbose("Initializing rating module",i),i.interactive?d.enable():d.disable(),i.initialRating&&(d.debug("Setting initial rating"),d.setRating(i.initialRating)),c.data(n.rating)&&(d.debug("Rating found in metadata"),d.setRating(c.data(n.rating))),d.instantiate()},instantiate:function(){d.verbose("Instantiating module",i),l=d,c.data(r,d)},destroy:function(){d.verbose("Destroying previous instance",l),c.removeData(r),u.off(o)},event:{mouseenter:function(){var e=R(this);e.nextAll().removeClass(t.hover),c.addClass(t.hover),e.addClass(t.hover).prevAll().addClass(t.hover)},mouseleave:function(){c.removeClass(t.hover),u.removeClass(t.hover)},click:function(){var e=R(this),n=d.getRating(),e=u.index(e)+1;i.clearable&&n==e?d.clearRating():d.setRating(e)}},clearRating:function(){d.debug("Clearing current rating"),d.setRating(0)},getRating:function(){var e=u.filter("."+t.active).size();return d.verbose("Current rating retrieved",e),e},enable:function(){d.debug("Setting rating to interactive mode"),u.on("mouseenter"+o,d.event.mouseenter).on("mouseleave"+o,d.event.mouseleave).on("click"+o,d.event.click),c.removeClass(t.disabled)},disable:function(){d.debug("Setting rating to read-only mode"),u.off(o),c.addClass(t.disabled)},setRating:function(e){var n=u.eq(0<=e-1?e-1:0);c.removeClass(t.hover),u.removeClass(t.hover).removeClass(t.active),0<e&&(d.verbose("Setting current rating to",e),n.addClass(t.active).prevAll().addClass(t.active)),R.proxy(i.onRate,s)(e)},setting:function(e,n){if(R.isPlainObject(e))R.extend(!0,i,e);else{if(n===x)return i[e];i[e]=n}},internal:function(e,n){if(R.isPlainObject(e))R.extend(!0,d,e);else{if(n===x)return d[e];d[e]=n}},debug:function(){i.debug&&(i.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,i.name+":"),d.debug.apply(console,arguments)))},verbose:function(){i.verbose&&i.debug&&(i.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,i.name+":"),d.verbose.apply(console,arguments)))},error:function(){d.error=Function.prototype.bind.call(console.error,console,i.name+":"),d.error.apply(console,arguments)},performance:{log:function(e){var n,t;i.performance&&(t=(n=(new Date).getTime())-(p||n),p=n,b.push({Element:s,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":t})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,100)},display:function(){var e=i.name+":",t=0;p=!1,clearTimeout(d.performance.timer),R.each(b,function(e,n){t+=n["Execution Time"]}),e+=" "+t+"ms",f&&(e+=" '"+f+"'"),1<v.size()&&(e+=" ("+v.size()+")"),(console.group!==x||console.table!==x)&&0<b.length&&(console.groupCollapsed(e),console.table?console.table(b):R.each(b,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),b=[]}},invoke:function(i,e,n){var a,o,t,r=l;return e=e||C,n=s||n,"string"==typeof i&&r!==x&&(i=i.split(/[\. ]/),a=i.length-1,R.each(i,function(e,n){var t=e!=a?n+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(R.isPlainObject(r[t])&&e!=a)r=r[t];else{if(r[t]!==x)return o=r[t],!1;{if(!R.isPlainObject(r[n])||e==a)return r[n]!==x&&(o=r[n]),!1;r=r[n]}}})),R.isFunction(o)?t=o.apply(n,e):o!==x&&(t=o),R.isArray(m)?m.push(t):m!==x?m=[m,t]:t!==x&&(m=t),o}};y?(l===x&&d.initialize(),d.invoke(h)):(l!==x&&d.destroy(),d.initialize())}),m!==x?m:this},R.fn.rating.settings={name:"Rating",namespace:"rating",verbose:!0,debug:!1,performance:!0,initialRating:0,interactive:!0,clearable:!1,onRate:function(e){},error:{method:"The method you called is not defined"},metadata:{rating:"rating"},className:{active:"active",disabled:"disabled",hover:"hover",loading:"loading"},selector:{icon:".icon"}}}(jQuery,(window,void document));