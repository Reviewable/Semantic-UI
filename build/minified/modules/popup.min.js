!function(S,z,t,E){S.fn.popup=function(a){var c,e=S(this),p=S(t),l=e.selector||"",u=(new Date).getTime(),C=[],P=a,T="string"==typeof P,A=[].slice.call(arguments,1);return e.each(function(){var f=S.isPlainObject(a)?S.extend(!0,{},S.fn.popup.settings,a):S.extend({},S.fn.popup.settings),t=f.selector,d=f.className,g=f.error,m=f.metadata,e=f.namespace,o="."+f.namespace,i="module-"+e,h=S(this),r=S(f.context),b=f.target?S(f.target):h,n=S(z),v=f.inline?b.offsetParent():n,y=f.inline?b.next(f.selector.popup):n.children(f.selector.popup).last(),k=0,w=this,s=h.data(i),x={initialize:function(){x.debug("Initializing module",h),"click"==f.on?h.on("click"+o,x.toggle):h.on(x.get.startEvent()+o,x.event.start).on(x.get.endEvent()+o,x.event.end),f.target&&x.debug("Target set to element",b),n.on("resize"+o,x.event.resize),x.instantiate()},instantiate:function(){x.verbose("Storing instance of module",x),s=x,h.data(i,s)},refresh:function(){f.inline?(y=b.next(t.popup),v=b.offsetParent()):y=n.children(t.popup).last()},destroy:function(){x.debug("Destroying previous module"),n.off(o),y.remove(),h.off(o).removeData(i)},event:{start:function(e){x.timer=setTimeout(function(){x.is.hidden()&&x.show()},f.delay)},end:function(){clearTimeout(x.timer),x.is.visible()&&x.hide()},resize:function(){x.is.visible()&&x.set.position()}},create:function(){x.debug("Creating pop-up html");var e=h.data(m.html)||f.html,t=h.data(m.variation)||f.variation,o=h.data(m.title)||f.title,n=h.data(m.content)||h.attr("title")||f.content;e||n||o?(e=e||f.template({title:o,content:n}),y=S("<div/>").addClass(d.popup).addClass(t).html(e),f.inline?(x.verbose("Inserting popup element inline",y),y.data(i,s).insertAfter(h)):(x.verbose("Appending popup element to body",y),y.data(i,s).appendTo(r)),S.proxy(f.onCreate,y)()):x.error(g.content)},toggle:function(){x.debug("Toggling pop-up"),x.is.hidden()?(x.debug("Popup is hidden, showing pop-up"),x.unbind.close(),x.hideAll(),x.show()):(x.debug("Popup is visible, hiding pop-up"),x.hide())},show:function(e){e=e||function(){},x.debug("Showing pop-up",f.transition),f.preserve||x.refresh(),x.exists()||x.create(),x.save.conditions(),x.set.position(),x.animate.show(e)},hide:function(e){e=e||function(){},h.removeClass(d.visible),x.restore.conditions(),x.unbind.close(),x.is.visible()&&x.animate.hide(e)},hideAll:function(){S(t.popup).filter(":visible").popup("hide")},hideGracefully:function(e){e&&0===S(e.target).closest(t.popup).size()?(x.debug("Click occurred outside popup hiding popup"),x.hide()):x.debug("Click was inside popup, keeping popup open")},exists:function(){return f.inline?0!==y.size():y.parent(r).size()},remove:function(){x.debug("Removing popup"),y.remove(),S.proxy(f.onRemove,y)()},save:{conditions:function(){x.cache={title:h.attr("title")},x.cache.title&&h.removeAttr("title"),x.verbose("Saving original attributes",x.cache.title)}},restore:{conditions:function(){return x.cache&&x.cache.title&&(h.attr("title",x.cache.title),x.verbose("Restoring original attributes",x.cache.title)),!0}},animate:{show:function(e){e=e||function(){},h.addClass(d.visible),f.transition&&S.fn.transition!==E&&h.transition("is supported")?y.transition(f.transition+" in",f.duration,function(){x.bind.close(),S.proxy(e,w)()}):y.stop().fadeIn(f.duration,f.easing,function(){x.bind.close(),S.proxy(e,w)()}),S.proxy(f.onShow,w)()},hide:function(e){e=e||function(){},x.debug("Hiding pop-up"),f.transition&&S.fn.transition!==E&&h.transition("is supported")?y.transition(f.transition+" out",f.duration,function(){x.reset(),e()}):y.stop().fadeOut(f.duration,f.easing,function(){x.reset(),e()}),S.proxy(f.onHide,w)()}},get:{startEvent:function(){return"hover"==f.on?"mouseenter":"focus"==f.on?"focus":void 0},endEvent:function(){return"hover"==f.on?"mouseleave":"focus"==f.on?"blur":void 0},offstagePosition:function(){var e=S(z).scrollTop(),t=S(z).scrollTop()+S(z).height(),o=0,n=S(z).width(),i={width:y.width(),height:y.outerHeight(),position:y.offset()},r={},a=[];return i.position&&(r={top:i.position.top<e,bottom:i.position.top+i.height>t,right:i.position.left+i.width>n,left:i.position.left<o}),x.verbose("Checking if outside viewable area",i.position),S.each(r,function(e,t){t&&a.push(e)}),0<a.length&&a.join(" ")},nextPosition:function(e){switch(e){case"top left":e="bottom left";break;case"bottom left":e="top right";break;case"top right":e="bottom right";break;case"bottom right":e="top center";break;case"top center":e="bottom center";break;case"bottom center":e="right center";break;case"right center":e="left center";break;case"left center":e="top center"}return e}},set:{position:function(e,t){S(z).width(),S(z).height();var o,n,i=b.outerWidth(),r=b.outerHeight(),a=y.width(),s=y.outerHeight(),c=v.outerWidth(),p=v.outerHeight(),l=f.distanceAway,u=f.inline?b.position():b.offset();switch(e=e||h.data(m.position)||f.position,t=t||h.data(m.offset)||f.offset,f.inline&&("left center"==e||"right center"==e?(t+=parseInt(z.getComputedStyle(w).getPropertyValue("margin-top"),10),l+=-parseInt(z.getComputedStyle(w).getPropertyValue("margin-left"),10)):(t+=parseInt(z.getComputedStyle(w).getPropertyValue("margin-left"),10),l+=parseInt(z.getComputedStyle(w).getPropertyValue("margin-top"),10))),x.debug("Calculating offset for position",e),e){case"top left":o={bottom:p-u.top+l,right:c-u.left-t,top:"auto",left:"auto"};break;case"top center":o={bottom:p-u.top+l,left:u.left+i/2-a/2+t,top:"auto",right:"auto"};break;case"top right":o={top:"auto",bottom:p-u.top+l,left:u.left+i+t,right:"auto"};break;case"left center":o={top:u.top+r/2-s/2+t,right:c-u.left+l,left:"auto",bottom:"auto"};break;case"right center":o={top:u.top+r/2-s/2+t,left:u.left+i+l,bottom:"auto",right:"auto"};break;case"bottom left":o={top:u.top+r+l,right:c-u.left-t,left:"auto",bottom:"auto"};break;case"bottom center":o={top:u.top+r+l,left:u.left+i/2-a/2+t,bottom:"auto",right:"auto"};break;case"bottom right":o={top:u.top+r+l,left:u.left+i+t,bottom:"auto",right:"auto"}}return y.css(o).removeClass(d.position).addClass(e).addClass(d.loading),(n=x.get.offstagePosition())?(x.debug("Element is outside boundaries",n),k<f.maxSearchDepth?(e=x.get.nextPosition(e),k++,x.debug("Trying new position",e),x.set.position(e)):(x.error(g.recursion),k=0,x.reset(),y.removeClass(d.loading),!1)):(x.debug("Position is on stage",e),k=0,y.removeClass(d.loading),!0)}},bind:{close:function(){"click"==f.on&&f.closable&&(x.verbose("Binding popup close event to document"),p.on("click"+o,function(e){x.verbose("Pop-up clickaway intent detected"),S.proxy(x.hideGracefully,this)(e)}))}},unbind:{close:function(){"click"==f.on&&f.closable&&(x.verbose("Removing close event from document"),p.off("click"+o))}},is:{animating:function(){return y.hasClass(d.animating)},visible:function(){return y.is(":visible")},hidden:function(){return!x.is.visible()}},reset:function(){y.attr("style","").removeAttr("style"),f.preserve||x.remove()},setting:function(e,t){if(S.isPlainObject(e))S.extend(!0,f,e);else{if(t===E)return f[e];f[e]=t}},internal:function(e,t){if(S.isPlainObject(e))S.extend(!0,x,e);else{if(t===E)return x[e];x[e]=t}},debug:function(){f.debug&&(f.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,f.name+":"),x.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),x.verbose.apply(console,arguments)))},error:function(){x.error=Function.prototype.bind.call(console.error,console,f.name+":"),x.error.apply(console,arguments)},performance:{log:function(e){var t,o;f.performance&&(o=(t=(new Date).getTime())-(u||t),u=t,C.push({Element:w,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":o})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(x.performance.display,100)},display:function(){var e=f.name+":",o=0;u=!1,clearTimeout(x.performance.timer),S.each(C,function(e,t){o+=t["Execution Time"]}),e+=" "+o+"ms",l&&(e+=" '"+l+"'"),(console.group!==E||console.table!==E)&&0<C.length&&(console.groupCollapsed(e),console.table?console.table(C):S.each(C,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),C=[]}},invoke:function(n,e,t){var i,r,o,a=s;return e=e||A,t=w||t,"string"==typeof n&&a!==E&&(n=n.split(/[\. ]/),i=n.length-1,S.each(n,function(e,t){var o=e!=i?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(S.isPlainObject(a[o])&&e!=i)a=a[o];else{if(a[o]!==E)return r=a[o],!1;{if(!S.isPlainObject(a[t])||e==i)return a[t]!==E&&(r=a[t]),!1;a=a[t]}}})),S.isFunction(r)?o=r.apply(t,e):r!==E&&(o=r),S.isArray(c)?c.push(o):c!==E?c=[c,o]:o!==E&&(c=o),r}};T?(s===E&&x.initialize(),x.invoke(P)):(s!==E&&x.destroy(),x.initialize())}),c!==E?c:this},S.fn.popup.settings={name:"Popup",debug:!1,verbose:!0,performance:!0,namespace:"popup",onCreate:function(){},onRemove:function(){},onShow:function(){},onHide:function(){},variation:"",content:!1,html:!1,title:!1,on:"hover",target:!1,closable:!0,context:"body",position:"top center",delay:150,inline:!1,preserve:!1,duration:250,easing:"easeOutQuad",transition:"scale",distanceAway:0,offset:0,maxSearchDepth:10,error:{content:"Your popup has no content specified",method:"The method you called is not defined.",recursion:"Popup attempted to reposition element to fit, but could not find an adequate position."},metadata:{content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{animating:"animating",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible"},selector:{popup:".ui.popup"},template:function(e){var t="";return typeof e!==E&&(typeof e.title!==E&&e.title&&(t+='<div class="header">'+e.title+"</div>"),typeof e.content!==E&&e.content&&(t+='<div class="content">'+e.content+"</div>")),t}},S.extend(S.easing,{easeOutQuad:function(e,t,o,n,i){return-n*(t/=i)*(t-2)+o}})}(jQuery,window,document);