!function(T,C){T.fn.video=function(h){var g,b=T(this),v=b.selector||"",y=(new Date).getTime(),w=[],F=h,z="string"==typeof F,P=[].slice.call(arguments,1);return b.each(function(){var l=T.isPlainObject(h)?T.extend(!0,{},T.fn.video.settings,h):T.extend({},T.fn.video.settings),e=l.selector,t=l.className,r=l.error,i=l.metadata,o=l.namespace,n="."+o,a="module-"+o,c=T(this),u=c.find(e.placeholder),s=c.find(e.playButton),d=c.find(e.embed),m=this,f=c.data(a),p={initialize:function(){p.debug("Initializing video"),u.on("click"+n,p.play),s.on("click"+n,p.play),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),f=p,c.data(a,p)},destroy:function(){p.verbose("Destroying previous instance of video"),c.removeData(a).off(n),u.off(n),s.off(n)},change:function(e,o,n){p.debug("Changing video to ",e,o,n),c.data(i.source,e).data(i.id,o).data(i.url,n),l.onChange()},reset:function(){p.debug("Clearing video embed and showing placeholder"),c.removeClass(t.active),d.html(" "),u.show(),l.onReset()},play:function(){p.debug("Playing video");var e=c.data(i.source)||!1,o=c.data(i.url)||!1,n=c.data(i.id)||!1;d.html(p.generate.html(e,n,o)),c.addClass(t.active),l.onPlay()},generate:{html:function(e,o,n){p.debug("Generating embed html");var t,i="auto"==l.width?c.width():l.width,a="auto"==l.height?c.height():l.height;return e&&o?"vimeo"==e?t='<iframe src="http://player.vimeo.com/video/'+o+"?="+p.generate.url(e)+'" width="'+i+'" height="'+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':"youtube"==e&&(t='<iframe src="http://www.youtube.com/embed/'+o+"?="+p.generate.url(e)+'" width="'+i+'" height="'+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):n?t='<iframe src="'+n+'" width="'+i+'" height="'+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':p.error(r.noVideo),t},url:function(e){var o=l.api?1:0,n=l.autoplay?1:0,t=l.hd?1:0,i=l.showUI?1:0,a=l.showUI?0:1,r="";return"vimeo"==e&&(r="api="+o+"&amp;title="+i+"&amp;byline="+i+"&amp;portrait="+i+"&amp;autoplay="+n,l.color&&(r+="&amp;color="+l.color)),"ustream"==e?(r="autoplay="+n,l.color&&(r+="&amp;color="+l.color)):"youtube"==e&&(r="enablejsapi="+o+"&amp;autoplay="+n+"&amp;autohide="+a+"&amp;hq="+t+"&amp;modestbranding=1",l.color&&(r+="&amp;color="+l.color)),r}},setting:function(e,o){if(T.isPlainObject(e))T.extend(!0,l,e);else{if(o===C)return l[e];l[e]=o}},internal:function(e,o){if(T.isPlainObject(e))T.extend(!0,p,e);else{if(o===C)return p[e];p[e]=o}},debug:function(){l.debug&&(l.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,l.name+":"),p.debug.apply(console,arguments)))},verbose:function(){l.verbose&&l.debug&&(l.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),p.verbose.apply(console,arguments)))},error:function(){p.error=Function.prototype.bind.call(console.error,console,l.name+":"),p.error.apply(console,arguments)},performance:{log:function(e){var o,n;l.performance&&(n=(o=(new Date).getTime())-(y||o),y=o,w.push({Element:m,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,100)},display:function(){var e=l.name+":",n=0;y=!1,clearTimeout(p.performance.timer),T.each(w,function(e,o){n+=o["Execution Time"]}),e+=" "+n+"ms",v&&(e+=" '"+v+"'"),1<b.size()&&(e+=" ("+b.size()+")"),(console.group!==C||console.table!==C)&&0<w.length&&(console.groupCollapsed(e),console.table?console.table(w):T.each(w,function(e,o){console.log(o.Name+": "+o["Execution Time"]+"ms")}),console.groupEnd()),w=[]}},invoke:function(t,e,o){var i,a,n,r=f;return e=e||P,o=m||o,"string"==typeof t&&r!==C&&(t=t.split(/[\. ]/),i=t.length-1,T.each(t,function(e,o){var n=e!=i?o+t[e+1].charAt(0).toUpperCase()+t[e+1].slice(1):t;if(T.isPlainObject(r[n])&&e!=i)r=r[n];else{if(r[n]!==C)return a=r[n],!1;{if(!T.isPlainObject(r[o])||e==i)return r[o]!==C&&(a=r[o]),!1;r=r[o]}}})),T.isFunction(a)?n=a.apply(o,e):a!==C&&(n=a),T.isArray(g)?g.push(n):g!==C?g=[g,n]:n!==C&&(g=n),a}};z?(f===C&&p.initialize(),p.invoke(F)):(f!==C&&p.destroy(),p.initialize())}),g!==C?g:this},T.fn.video.settings={name:"Video",namespace:"video",debug:!1,verbose:!0,performance:!0,metadata:{source:"source",id:"id",url:"url"},onPlay:function(){},onReset:function(){},onChange:function(){},onPause:function(){},onStop:function(){},width:"auto",height:"auto",autoplay:!1,color:"#442359",hd:!0,showUI:!1,api:!0,error:{noVideo:"No video specified",method:"The method you called is not defined"},className:{active:"active"},selector:{embed:".embed",placeholder:".placeholder",playButton:".play"}}}(jQuery,(window,void document));